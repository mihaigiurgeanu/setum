<?xml version="1.0" encoding="ISO-8859-15"?>

<ejb-jar xmlns="http://java.sun.com/xml/ns/j2ee"
	 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	 version="2.1">
<!--
	 xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
			     http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd"
-->  

  <description>Describe here the content of this file</description>
  <display-name>datalayer</display-name>

  <enterprise-beans>
    <entity>
      <description>Product bean</description>
      <display-name>datalayer/ProductEJB</display-name>
      <ejb-name>ProductEJB</ejb-name>
      <local-home>ro.kds.erp.data.ProductLocalHome</local-home>
      <local>ro.kds.erp.data.ProductLocal</local>
      <ejb-class>ro.kds.erp.data.ProductEC2L</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Product</abstract-schema-name>
      <cmp-field>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>name</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>code</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>entryPrice</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>sellPrice</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>price1</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>price2</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>price3</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>price4</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>price5</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>priceCorrectionP</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>description</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>description1</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
      <env-entry>
	<env-entry-name>name1</env-entry-name>
	<env-entry-type>java.lang.String</env-entry-type>
	<env-entry-value>value1</env-entry-value>
      </env-entry>
      <query>
	<query-method>
	  <method-name>findAll</method-name>
	  <method-params></method-params>
	</query-method>
	<ejb-ql>SELECT OBJECT(c) FROM Product AS c</ejb-ql>
      </query>
    </entity>



    <entity>
      <description>Dynamic attribute of the products.
      Allows to business logic to define complex data structures
      for products.</description>
      <display-name>datalayer/AttributeEJB</display-name>
      <ejb-name>AttributeEJB</ejb-name>
      <local-home>ro.kds.erp.data.AttributeLocalHome</local-home>
      <local>ro.kds.erp.data.AttributeLocal</local>
      <ejb-class>ro.kds.erp.data.AttributeBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Attribute</abstract-schema-name>
      <cmp-field>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>name</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>stringValue</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>intValue</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>decimalValue</field-name>
      </cmp-field>      
      <cmp-field>
	<field-name>boolValue</field-name>
      </cmp-field>      
      <primkey-field>id</primkey-field>
      <env-entry>
	<env-entry-name>name1</env-entry-name>
	<env-entry-type>java.lang.String</env-entry-type>
	<env-entry-value>value1</env-entry-value>
      </env-entry>
    </entity>


    <entity>
      <description>Category of products. Any category may have sub categories.</description>
      <display-name>datalayer/CategoryEJB</display-name>
      <ejb-name>CategoryEJB</ejb-name>
      <local-home>ro.kds.erp.data.CategoryLocalHome</local-home>
      <local>ro.kds.erp.data.CategoryLocal</local>
      <ejb-class>ro.kds.erp.data.CategoryBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Category</abstract-schema-name>
      <cmp-field>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>name</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
      <query>
	<description>Counts the products in this category</description>
	<query-method>
	  <method-name>ejbSelectProductsCount</method-name>
	  <method-params>
	    <method-param>java.lang.Integer</method-param>
	  </method-params>	  
	</query-method>
	<ejb-ql>SELECT COUNT(p) FROM Category c, IN(c.products) p WHERE c.id = ?1</ejb-ql>
      </query>
      <query>
	<description>Gets all the products in this category with a specified code</description>
	<query-method>
	  <method-name>ejbSelectProductsByCode</method-name>
	  <method-params>
	    <method-param>java.lang.Integer</method-param>
	    <method-param>java.lang.String</method-param>
	  </method-params>
	</query-method>
	<ejb-ql>
	  SELECT OBJECT(p) 
	  FROM Category c, IN(c.products) p
	  WHERE c.id = ?1 AND p.code = ?2
	</ejb-ql>
      </query>
    </entity>

    <entity>
      <description>A product that has other products as components</description>
      <display-name>datalayer/CompositeProduct</display-name>
      <ejb-name>CompositeProductEJB</ejb-name>
      <local-home>ro.kds.erp.data.CompositeProductLocalHome</local-home>
      <local>ro.kds.erp.data.CompositeProductLocal</local>
      <ejb-class>ro.kds.erp.data.CompositeProductBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>CompositeProduct</abstract-schema-name>
      <cmp-field>
	<description>Primary key</description>
	<field-name>id</field-name>
      </cmp-field>
      
      <primkey-field>id</primkey-field>
    </entity>





    <entity>
      <description>The offer description</description>
      <display-name>OfferEJB</display-name>
      <ejb-name>OfferEJB</ejb-name>
      <local-home>ro.kds.erp.data.OfferLocalHome</local-home>
      <local>ro.kds.erp.data.OfferLocal</local>
      <ejb-class>ro.kds.erp.data.OfferBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Offer</abstract-schema-name>
      <cmp-field>
	<description>Primary key</description>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<description>The name of the offer. Used for an easy offer identification</description>
	<field-name>name</field-name>
      </cmp-field>
      <cmp-field>
	<description>A short description of this offer</description>
	<field-name>description</field-name>
      </cmp-field>
      <cmp-field>
	<description>Valability date. This offer is available starting with this date.</description>
	<field-name>dateFrom</field-name>
      </cmp-field>
      <cmp-field>
	<description>Valability date. This offer will be available until this date.</description>
	<field-name>dateTo</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>comment</field-name>
      </cmp-field>
      <cmp-field>
	<description>If this is true, the offer is not available, regardless of the valability dates.</description>
	<field-name>discontinued</field-name>
      </cmp-field>
      <cmp-field>
	<description>An integer used to group similar offers together</description>
	<field-name>category</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
      <ejb-local-ref>
	<description>Use to create the associate DocumentEJB entity</description>
	<ejb-ref-name>ejb/DocumentHome</ejb-ref-name>
	<ejb-ref-type>Entity</ejb-ref-type>
	<local-home>ro.kds.erp.data.DocumentLocalHome</local-home>
	<local>ro.kds.erp.data.DocumentLocal</local>
	<ejb-link>DocumentEJB</ejb-link>
      </ejb-local-ref>
      <query>
	<description>Gets all offers in a certain group (category).</description>
	<query-method>
	  <method-name>findByCategory</method-name>
	  <method-params>
	    <method-param>java.lang.Integer</method-param>
	  </method-params>
	</query-method>
	<ejb-ql>SELECT OBJECT(o) FROM Offer AS o WHERE o.category=?1</ejb-ql>
      </query>
    </entity>






    <entity>
      <description>An item line of an offer</description>
      <display-name>OfferItemEJB</display-name>
      <ejb-name>OfferItemEJB</ejb-name>
      <local-home>ro.kds.erp.data.OfferItemLocalHome</local-home>
      <local>ro.kds.erp.data.OfferItemLocal</local>
      <ejb-class>ro.kds.erp.data.OfferItemBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>OfferItem</abstract-schema-name>
      <cmp-field>
	<description>Primary key</description>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<description>The offered quantity</description>
	<field-name>quantity</field-name>
      </cmp-field>
      <cmp-field>
	<description>The unit of measurement</description>
	<field-name>unit</field-name>
      </cmp-field>
      <cmp-field>
	<description>The offered price</description>
	<field-name>price</field-name>
      </cmp-field>
      <cmp-field>
	<description>Special price. Use is application dependent.</description>
	<field-name>price1</field-name>
      </cmp-field>
      <cmp-field>
	<description>Special price. Use is application dependent.</description>
	<field-name>price2</field-name>
      </cmp-field>
      <cmp-field>
	<description>Special price. Use is application dependent.</description>
	<field-name>price3</field-name>
      </cmp-field>
      <cmp-field>
	<description>Special price. Use is application dependent.</description>
	<field-name>price4</field-name>
      </cmp-field>
      <cmp-field>
	<description>Special price. Use is application dependent.</description>
	<field-name>price5</field-name>
      </cmp-field>
      <cmp-field>
	<description>The discount for this line item</description>
	<field-name>discount</field-name>
      </cmp-field>
      <cmp-field>
	<description>RDF resource identifier used by UI module to know how to edit the corresponding product.</description>
	<field-name>businessCategory</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
    </entity>





    <entity>
      <description>Represents an abstract document's 
      persistent data</description>
      <display-name>DocumentEJB</display-name>
      <ejb-name>DocumentEJB</ejb-name>
      <local-home>ro.kds.erp.data.DocumentLocalHome</local-home>
      <local>ro.kds.erp.data.DocumentLocal</local>
      <ejb-class>ro.kds.erp.data.DocumentBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Document</abstract-schema-name>
      <cmp-field>
	<description>Primary key</description>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<description>The document number. Must be assigned by the
	bussiness logic.</description>
	<field-name>number</field-name>
      </cmp-field>
      <cmp-field>
	<description>The document's date. On creation, it is automatically assigned to the current date.</description>
	<field-name>date</field-name>
      </cmp-field>
      <cmp-field>
	<description>While this field is true, the document maybe edited. After it is set to false, the document should not be modified.</description>
	<field-name>isDraft</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
    </entity>




    <!-- ClientEJB -->
    <entity>
      <description>The data of a client (person or company)</description>
      <ejb-name>ClientEJB</ejb-name>
      <local-home>ro.kds.erp.data.ClientLocalHome</local-home>
      <local>ro.kds.erp.data.ClientLocal</local>
      <ejb-class>ro.kds.erp.data.ClientBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Client</abstract-schema-name>
      <cmp-field>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>isCompany</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>firstName</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>lastName</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>companyName</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>address</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>postalCode</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>city</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>countryCode</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>companyCode</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>phone</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>iban</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>bank</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>comment</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
      <query>
	<description>Selects companies or persons, depending on parameter</description>
	<query-method>
	  <method-name>findByCompanyFlag</method-name>
	  <method-params>
	    <method-param>boolean</method-param>
	  </method-params>
	</query-method>
	<ejb-ql>SELECT OBJECT(c) FROM Client AS c WHERE c.isCompany=?1 ORDER BY c.companyName, c.lastName, c.firstName</ejb-ql>
      </query>
      <query>
	<description>Selects all clients</description>
	<query-method>
	  <method-name>findAll</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>SELECT OBJECT(c) FROM Client AS c ORDER by c.companyName, c.lastName, c.firstName</ejb-ql>
      </query>
    </entity>


    <!-- ContactEJB -->
    <entity>
      <description>Each client may have zero or more contacts</description>
      <ejb-name>ContactEJB</ejb-name>
      <local-home>ro.kds.erp.data.ContactLocalHome</local-home>
      <local>ro.kds.erp.data.ContactLocal</local>
      <ejb-class>ro.kds.erp.data.ContactBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Contact</abstract-schema-name>
      <cmp-field>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>firstName</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>lastName</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>phone</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>mobile</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>fax</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>email</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>department</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>title</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>comment</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
    </entity>

    <entity>
      <description>It represents a selection of products. Selections
      are like categories, but more general in the sense that they
      do not form a tree. There are more selections a product can belong to
      and a selection can hold more products. The selections can also be
      grouped in other selections so one can model a selections of products by
      manufacturer, this selections containing selections of products by each
      particular manufacturer.</description>

      <ejb-name>ProductsSelectionEJB</ejb-name>
      <local-home>ro.kds.erp.data.ProductsSelectionLocalHome</local-home>
      <local>ro.kds.erp.data.ProductsSelectionLocal</local>
      <ejb-class>ro.kds.erp.data.ProductsSelectionBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>true</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>ProductsSelection</abstract-schema-name>
      <cmp-field>
	<description>Primary key</description>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<description>The code is a unique identifier meant to be readible to the user</description>
	<field-name>code</field-name>
      </cmp-field>
      <cmp-field>
	<description>A clear name for the field</description>
	<field-name>name</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>description</field-name>
      </cmp-field>

      <primkey-field>id</primkey-field>

      <query>
	<query-method>
	  <method-name>findByCode</method-name>
	  <method-params>
	    <method-param>java.lang.String</method-param>
	  </method-params>
	</query-method>
	<ejb-ql>SELECT OBJECT(s) FROM ProductsSelection s WHERE s.code=?1</ejb-ql>
      </query>
    </entity>




    <!-- Order bean -->
    <entity>
      <description>Order entity</description>
      <display-name>datalayer/OrderEJB</display-name>
      <ejb-name>OrderEJB</ejb-name>
      <local-home>ro.kds.erp.data.OrderLocalHome</local-home>
      <local>ro.kds.erp.data.OrderLocal</local>
      <ejb-class>ro.kds.erp.data.OrderBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Order</abstract-schema-name>
      <cmp-field>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>installation</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryLocation</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryLocationOther</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryDistance</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryComments</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>discount</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>advancePayment</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>advanceDocument</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryTerm</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryTerm1</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryAddress</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryAddressHint</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryPhone</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryContact</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>deliveryDate</field-name>
      </cmp-field>

      <primkey-field>id</primkey-field>

      <ejb-local-ref>
	<ejb-ref-name>ejb/DocumentHome</ejb-ref-name>
	<ejb-ref-type>Entity</ejb-ref-type>
	<local-home>ro.kds.erp.data.DocumentLocalHome</local-home>
	<local>ro.kds.erp.data.DocumentLocal</local>
	<ejb-link>DocumentEJB</ejb-link>
      </ejb-local-ref>
      <ejb-local-ref>
	<ejb-ref-name>ejb/ProductHome</ejb-ref-name>
	<ejb-ref-type>Entity</ejb-ref-type>
	<local-home>ro.kds.erp.data.ProductLocalHome</local-home>
	<local>ro.kds.erp.data.DocumentLocal</local>
	<ejb-link>ProductEJB</ejb-link>
      </ejb-local-ref>
      <ejb-local-ref>
	<ejb-ref-name>ejb/ClientHome</ejb-ref-name>
	<ejb-ref-type>Entity</ejb-ref-type>
	<local-home>ro.kds.erp.data.ClientLocalHome</local-home>
	<local>ro.kds.erp.data.ClientLocal</local>
	<ejb-link>ClientEJB</ejb-link>
      </ejb-local-ref>
      <ejb-local-ref>
	<ejb-ref-name>ejb/AttributeHome</ejb-ref-name>
	<ejb-ref-type>Entity</ejb-ref-type>
	<local-home>ro.kds.erp.data.AttributeLocalHome</local-home>
	<local>ro.kds.erp.data.AttributeLocal</local>
	<ejb-link>AttributeEJB</ejb-link>
      </ejb-local-ref>
      <query>
	<query-method>
	  <method-name>findAll</method-name>
	  <method-params></method-params>
	</query-method>
	<ejb-ql>SELECT OBJECT(o) FROM Order AS o</ejb-ql>
      </query>
    </entity>



    <!-- Order line bean -->
    <entity>
      <description>The data contained in a line of an order</description>
      <display-name>datalayer/OrderLineEJB</display-name>
      <ejb-name>OrderLineEJB</ejb-name>
      <local-home>ro.kds.erp.data.OrderLineLocalHome</local-home>
      <local>ro.kds.erp.data.OrderLineLocal</local>
      <ejb-class>ro.kds.erp.data.OrderLineBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>OrderLine</abstract-schema-name>
      <cmp-field>
	<field-name>id</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>price</field-name>
      </cmp-field>
      <cmp-field>
	<field-name>quantity</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
    </entity>


  </enterprise-beans>




  <relationships>
    <ejb-relation>
      <ejb-relation-name>Product-Attribute</ejb-relation-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>product-has-attributes</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>ProductEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>attributes</cmr-field-name>
	  <cmr-field-type>java.util.Collection</cmr-field-type>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>attributes-of-product</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>AttributeEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>
    
    <ejb-relation>
      <ejb-relation-name>Product-CompositeProduct</ejb-relation-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>PlainProduct</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>ProductEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>CompositeProduct</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>CompositeProduct</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>CompositeProductEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>Product</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
    </ejb-relation>

    <ejb-relation>
      <ejb-relation-name>CompositeProductComponents</ejb-relation-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>CompositeProduct</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>CompositeProductEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>Components</cmr-field-name>
	  <cmr-field-type>java.util.Collection</cmr-field-type>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>ComponentProducts</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>ProductEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>
    
    <ejb-relation>
      <ejb-relation-name>CategorizedProducts</ejb-relation-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>CategoryOfProducts</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>CategoryEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>products</cmr-field-name>
	  <cmr-field-type>java.util.Collection</cmr-field-type>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>ProductsInCategory</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>ProductEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>category</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
    </ejb-relation>
    
    <ejb-relation>
      <ejb-relation-name>CategorySubCategory</ejb-relation-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>SuperCategory</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>CategoryEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>subCategories</cmr-field-name>
	  <cmr-field-type>java.util.Collection</cmr-field-type>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>SubCategory</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>CategoryEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>


    <ejb-relation>
      <description>Offer -- OfferItem, one to many relasinonship.</description>
      <ejb-relation-name>Offer-OfferItem</ejb-relation-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>OfferHeading</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>OfferEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <description>The collection of OfferItemLocal objects.</description>
	  <cmr-field-name>items</cmr-field-name>
	  <cmr-field-type>java.util.Collection</cmr-field-type>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>OfferLineItems</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>OfferItemEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>offer</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
    </ejb-relation>

    <ejb-relation>
      <description>Attaching the document properties to an offer</description>
      <ejb-relation-name>OfferInheritsDocument</ejb-relation-name>
      <ejb-relationship-role>
	<description>The offer pointing to a document</description>
	<ejb-relationship-role-name>OfferSpecificData</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>OfferEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>document</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<description>The document beeing pointed to an Offer</description>
	<ejb-relationship-role-name>DocumentCommonData</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>DocumentEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>

    <ejb-relation>
      <description>A line item on an offer refers to a product</description>
      <ejb-relation-name>ProductOnOffer</ejb-relation-name>
      <ejb-relationship-role>
	<description>The OfferItem that is referencing a Product</description>
	<ejb-relationship-role-name>OfferItemeReferencingProduct</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>OfferItemEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <description>A ro.kds.erp.data.ProductLocal object</description>
	  <cmr-field-name>product</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<description>The product</description>
	<ejb-relationship-role-name>ProductOfferLine</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>ProductEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>

    <ejb-relation>
      <description>An offer may be issued to a specific client</description>
      <ejb-relation-name>Offer-Client</ejb-relation-name>
      <ejb-relationship-role>
	<description>The offer reffering a client</description>
	<ejb-relationship-role-name>OffersIssuedToClient</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>OfferEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>client</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>ClientHavingOffer</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>ClientEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>

    <ejb-relation>
      <description>An attribute's value maybe another product</description>
      <ejb-relation-name>ProductAttribute</ejb-relation-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>AttributeWithProductValue</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>AttributeEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>product</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>ProductValueOfAnAttribute</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>ProductEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>


    <ejb-relation>
      <description>Client - Contacts</description>
      <ejb-relation-name>ClientContacts</ejb-relation-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>ClientHasContacts</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>ClientEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>contacts</cmr-field-name>
	  <cmr-field-type>java.util.Collection</cmr-field-type>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>ContactsOfAClient</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>ContactEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>

    <ejb-relation>
      <description>Many to many relation between ProductsSelection and Product</description>
      <ejb-relation-name>ProductsSelectionProduct</ejb-relation-name>
      <ejb-relationship-role>
	<description>ProductsSelection has many products</description>
	<ejb-relationship-role-name>SelectionOfProducts</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>ProductsSelectionEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>products</cmr-field-name>
	  <cmr-field-type>java.util.Collection</cmr-field-type>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<description>A product can be part of many selections.</description>
	<ejb-relationship-role-name>ProductInSelections</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>ProductEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>

    <ejb-relation>
      <description>Selections may contain other selections as well</description>
      <ejb-relation-name>ProductsSelectionSelfJoin</ejb-relation-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>ProductsSelectionParent</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>ProductsSelectionEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>selections</cmr-field-name>
	  <cmr-field-type>java.util.Collection</cmr-field-type>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>ProductsSelectionChild</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>ProductsSelectionEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>


    <ejb-relation>
      <ejb-realtion-name>Order-Document</ejb-realtion-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>OrderSpecificDocumentData</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>OrderEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>document</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>OrderGenericDocumentData</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>DocumentEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>


    <ejb-relation>
      <description>Orders of a Client</description>
      <ejb-relation-name>ClientOrders</ejb-relation-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>OrdersMadeByClient</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>OrderEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>client</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>ClientMakingOrders</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>ClientEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>


    <ejb-relation>
      <description>Order-OrderLines</description>
      <ejb-relationship-name>OrderOfOrderLines</ejb-relationship-name>
      <ejb-relationship-role>
	<ejb-realtionship-role-name>OrderHavingOrderLines</ejb-realtionship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>OrderEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>lines</cmr-field-name>
	  <cmr-field-type>java.util.Collection</cmr-field-type>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>OrderLinesBelongingToOrder</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>OrderLineEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>

    <ejb-relation>
      <description>Each order line is attached to some offer line. Only offered products can be ordered.</description>
      <ejb-relationship-name>OrderLine-OfferItem</ejb-relationship-name>
      <ejb-relationship-role>
	<ejb-relationship-role-name>OrderLinesForOfferItem</ejb-relationship-role-name>
	<multiplicity>Many</multiplicity>
	<relationship-role-source>
	  <ejb-name>OrderLineEJB</ejb-name>
	</relationship-role-source>
	<cmr-field>
	  <cmr-field-name>offerItem</cmr-field-name>
	</cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
	<ejb-relationship-role-name>OfferItemOfOrederLines</ejb-relationship-role-name>
	<multiplicity>One</multiplicity>
	<relationship-role-source>
	  <ejb-name>OfferItemEJB</ejb-name>
	</relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>


  </relationships>


  <assembly-descriptor>

    <container-transaction>
      <method>
	<ejb-name>ProductEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <method>
	<ejb-name>AttributeEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <method>
	<ejb-name>CategoryEJB</ejb-name>
	<method-name>*</method-name>
      </method>
    
      <method>
	<ejb-name>CompositeProductEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <method>
	<ejb-name>OfferEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <method>
	<ejb-name>OfferItemEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <method>
	<ejb-name>DocumentEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <method>
	<ejb-name>ClientEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <method>
	<ejb-name>ContactEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <method>
	<ejb-name>ProductsSelectionEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <method>
	<ejb-name>OrderEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <method>
	<ejb-name>OrderLineEJB</ejb-name>
	<method-name>*</method-name>
      </method>

      <trans-attribute>Supports</trans-attribute>



    </container-transaction>




  </assembly-descriptor>

</ejb-jar>
